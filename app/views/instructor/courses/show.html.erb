<script>
  $(function() {

    $('.lessons').sortable({
      update: function(event,ui){ 
      $.ajax({
          type: 'PUT',
          url: ui.item.data('update-url'),
          dataType: 'json',
          data: { lesson: { row_order_position: ui.item.index() } }
        });

        //alert("Item id: " + ui.item.data('item-id') + "Index: " + ui.item.index());
      }
    });
  })
</script>
<div class ='form-box'>
<div class= 'row'>  
<!--   <div > -->
    <h1 class="text-center">Instructor Admin View</h1>
<h2>&para;<%= current_course.title%></h2>  
 
    <p><%= link_to 'Add a new section...', new_instructor_course_section_path(current_course), :class => 'btn' %>&nbsp;&nbsp;&nbsp;
  <%= link_to 'Preview As Student...', course_path(current_course), :class => 'btn' %></p>

  <div class="col-xs-12">
    <% current_course.sections.each do |section| %> 
           
      <div class="section text-center">
        
         <h3>&sect;<%= section.title %>: &nbsp;&nbsp;&nbsp;<%= link_to ' Add New Lesson', new_instructor_section_lesson_path(section) %>  </h3> 

        <ul class="lessons list-unstyled">
           <% section.lessons.rank(:row_order).each do |lesson| %>
       
             <li  data-update-url="<%= instructor_lesson_path(lesson) %>"  class="lesson text-center">
               <h4><%= lesson.title %></h4>
               <em><%= lesson.subtitle %></em>
             </li>
        
           <% end %>
         </ul>

      </div>
      
     <% end %> 
   </div>

 <!--  </div> -->
</div>


</div> 
